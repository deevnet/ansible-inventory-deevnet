# PXE Boot Server Configuration for bootstrap_nodes
# ------------------------------------------------------------------------------

# Artifact server URL (for inst.repo, inst.ks, etc.)
bootstrap_artifact_server: "http://artifacts.dvntm.deevnet.net"

# Bootstrap-authoritative mode
# Use dnsmasq for TFTP + DHCP + DNS
bootstrap_tftp_backend: "dnsmasq"

# Network interface for DHCP/TFTP/DNS services (downstream)
# This is the KEY in infrastructure.interfaces (OS interface discovered from MAC)
bootstrap_dhcp_interface_key: "eth0"

# DHCP Configuration for substrate network (192.168.10.0/23)
# ------------------------------------------------------------------------------
bootstrap_dhcp_range_start: "192.168.10.100"
bootstrap_dhcp_range_end: "192.168.11.254"
bootstrap_dhcp_lease_time: "12h"

# Network options - provisioner is the gateway
bootstrap_dhcp_gateway: "192.168.10.95"
bootstrap_dhcp_netmask: "255.255.254.0"
bootstrap_dhcp_dns_servers:
  - "192.168.10.95"

# DHCP domain
bootstrap_dhcp_domain: "dvntm.deevnet.net"

# TFTP directories to create
bootstrap_tftp_dirs:
  - pxelinux.cfg
  - fedora
  - fedora/43

# Netboot Menu Entries
# ------------------------------------------------------------------------------
# Boot menu entries for PXE. Files must be pre-staged by artifacts role.
bootstrap_netboot_images:
  - name: "Fedora 43 Server"
    dest_subdir: "fedora/43"
    boot_options: >-
      inst.repo=http://artifacts.dvntm.deevnet.net/fedora/43/mirror
      inst.stage2=http://artifacts.dvntm.deevnet.net/fedora/43/mirror
      inst.ks=http://artifacts.dvntm.deevnet.net/kickstart/builder-node.ks

# PXE Boot Menu Configuration
# ------------------------------------------------------------------------------
bootstrap_pxe_boot_prompt: "Press <Tab> for boot options, <Enter> to boot default"
bootstrap_pxe_timeout: 300

# DNS Configuration
# ------------------------------------------------------------------------------
# Enable DNS forwarding (upstream servers populated dynamically by playbook)
bootstrap_enable_dns: true
bootstrap_dns_upstream_servers: []

# Service Configuration
# ------------------------------------------------------------------------------
# Enable dnsmasq service to start on boot
bootstrap_dnsmasq_service_enabled: true

# Enable DHCP functionality (set false for TFTP-only mode)
bootstrap_dnsmasq_dhcp_enabled: false

# Logging (useful for debugging)
# ------------------------------------------------------------------------------
bootstrap_dnsmasq_log_queries: false
bootstrap_dnsmasq_log_dhcp: true
